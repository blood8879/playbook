# Use Case Document: 아마추어 축구 스탯 관리 및 리그 운영 서비스

이 문서는 아마추어 축구인들을 위한 개인/팀별 스탯 관리 및 리그 생성/관리 서비스의 유스케이스(use case)를 상세하게 기술합니다.

---

## 목차

- [1. Actor Definitions](#1-actor-definitions)
- [2. Use Case Scenarios](#2-use-case-scenarios)
- [3. Main Steps](#3-main-steps)
- [4. Exception Handling](#4-exception-handling)
- [5. Comprehensive Actor Definitions](#5-comprehensive-actor-definitions)
- [6. Detailed Use Case Scenarios](#6-detailed-use-case-scenarios)
- [7. Main Steps and Flow of Events](#7-main-steps-and-flow-of-events)
- [8. Alternative Flows and Edge Cases](#8-alternative-flows-and-edge-cases)
- [9. Preconditions and Postconditions](#9-preconditions-and-postconditions)
- [10. Business Rules and Constraints](#10-business-rules-and-constraints)
- [11. Exception Handling Procedures](#11-exception-handling-procedures)
- [12. User Interface Considerations](#12-user-interface-considerations)
- [13. Data Requirements and Data Flow](#13-data-requirements-and-data-flow)
- [14. Security and Privacy Considerations](#14-security-and-privacy-considerations)

---

## 1. Actor Definitions

| 액터               | 역할 및 책임                                                      |
|--------------------|-----------------------------------------------------------------|
| **팀 리더**         | 팀 생성, 팀원 초대, 팀 가입 승인, 경기 스탯 입력, 리그 운영 등 전체 팀 관리    |
| **팀원**           | 팀에 참여, 초대 수락 또는 가입 신청, 경기 참여, 경기 스탯 입력                         |
| **게스트 사용자**    | 시스템에 등록되지 않은 팀의 구성원 또는 용병, 경기 스탯 기록 대상                      |
| **시스템**          | 사용자 인증, 데이터 처리 및 저장, 실시간 업데이트 제공                            |
| **관리자 (옵션)**    | 전체 서비스 모니터링 및 유지보수, 결과 입력 시 참가자 추가/불참 여부 변경 등 문제 발생 시 지원  |

---

## 2. Use Case Scenarios

### A. 로그인 및 회원가입
- **목표**: 사용자가 이메일 및 비밀번호를 입력하거나 소셜 계정 (Kakao, Google)으로 인증하여 서비스에 접근
- **시나리오**:
  1. 사용자가 `/login` 또는 `/signup` 페이지에 접근
  2. 이메일, 비밀번호(및 추가 정보)를 입력
  3. 시스템이 입력값을 검증 및 인증
  4. 인증 성공 시 대시보드(`/dashboard`)로 리다이렉션, 실패 시 오류 메시지 출력

### B. 팀 생성 및 팀원 관리
- **목표**: 팀 리더가 팀을 생성하고 팀원 초대를 통해 팀을 구성
- **시나리오**:
  1. 팀 리더가 대시보드에서 "팀 관리" 메뉴 선택
  2. "팀 생성" 버튼 클릭 후 팀 정보(팀 이름, 설명 등) 입력
  3. 팀 생성 완료 후 팀 목록에 반영
  4. 팀 상세 페이지에서 팀원 초대 기능 사용
  5. 초대받은 팀원이 초대를 수락하여 팀에 등록
  6. **추가 흐름**: 사용자가 팀명 검색을 통해 가입 신청  
     - 사용자가 팀명을 검색하여 가입 신청
     - 팀 리더는 신청 내역을 확인 후 **수락 버튼**을 눌러 가입 승인

### C. 경기 일정 생성 및 스탯 기록 시나리오
- **목표**: 경기 일정을 생성하고 경기 종료 후 각 선수의 스탯(골, 도움 등)을 기록
- **시나리오**:
  1. "경기 관리" 메뉴에서 "경기 일정 생성" 버튼 클릭
  2. 경기 일정, 장소, 시간 등 정보 입력
  3. 참가자 추가 및 관리
  4. **추가 단계 1**: 등록된 팀이 아닌 경우, "게스트 클럽" 등록 후 경기 기록 관리  
     - 게스트 클럽을 별도 등록하여 상대 전적 등 관리
  5. **추가 단계 2**: 상대 팀 미정일 경우, 상대 팀 정보를 미입력하고 나중에 관리자가 업데이트할 수 있도록 처리
  6. **추가 단계 3**: 용병(우리 팀원이 아닌 외부 선수)이 스탯(골, 어시스트) 기록 시 해당 정보 입력
  7. 경기 종료 후 각 선수의 스탯 입력
  8. **추가 단계 4**: 결과 입력 시, 관리자는 참가자 추가/불참 여부를 변경 관리할 수 있어야 함  
     - 예: 불참이었으나 참가한 경우 또는 그 반대의 상황에 대해 수정
  9. 기록 저장 및 팀/개인 통계 업데이트

### D. 리그 생성 및 관리
- **목표**: 리그를 생성하고, 팀들을 등록하여 경기 일정을 관리
- **시나리오**:
  1. 리그 관리 메뉴에서 "리그 생성" 버튼 클릭
  2. 리그 정보(이름, 기간, 참가 팀 등) 입력
  3. 리그 생성 후 경기 일정 자동 생성(또는 수동 조정)
  4. 리그 진행 중 팀별 순위 및 결과 업데이트
  5. 최종 결과 및 통계 제공

---

## 3. Main Steps

### A. 로그인 및 회원가입
1. 사용자가 로그인/회원가입 페이지에 접근
2. 이메일, 비밀번호 입력 및 제출
3. 시스템이 인증 진행
4. 인증 성공 시 대시보드로 이동, 실패 시 오류 메시지 제공

### B. 팀 생성 및 팀원 관리
1. 대시보드에서 "팀 관리" 메뉴 선택
2. "팀 생성" 버튼 클릭 후 팀 정보 입력 및 저장
3. 팀 목록에 새 팀 반영
4. 팀 상세 페이지에서 팀원 초대 기능 실행
5. 초대받은 팀원이 수락하여 팀 등록
6. **추가 단계**: 사용자가 팀명 검색 후 가입 신청 → 팀 리더가 신청 내역 확인 후 수락

### C. 경기 일정 생성 및 스탯 기록
1. "경기 관리" 메뉴에서 "경기 일정 생성" 버튼 클릭
2. 경기 일정, 장소, 시간 등 정보 입력
3. 참가자 추가 및 관리
4. **추가 단계 1**: 등록되지 않은 팀의 경우, "게스트 클럽" 등록 후 경기 기록 관리
5. **추가 단계 2**: 상대 팀 미정인 경우, 상대 팀 정보를 미입력하고 이후 관리자가 업데이트할 수 있도록 처리
6. **추가 단계 3**: 용병(외부 선수)이 스탯(골, 어시스트) 기록 시 해당 정보 입력
7. 경기 종료 후 각 선수의 스탯 입력
8. **추가 단계 4**: 결과 입력 시, 관리자가 참가자 추가/불참 여부를 변경 관리 (예: 불참이었으나 참가한 경우 또는 그 반대)
9. 기록 저장 및 팀/개인 통계 업데이트

### D. 리그 생성 및 관리
1. "리그 관리" 메뉴에서 "리그 생성" 버튼 클릭
2. 리그 정보 입력 및 팀 등록
3. 경기 일정 생성 및 관리
4. 진행 중인 리그의 순위 및 결과 업데이트

---

## 4. Exception Handling

- **로그인/회원가입**
  - 잘못된 이메일/비밀번호 → 오류 메시지 출력, 재입력 유도
  - 필수 항목 누락 → 입력 필드 하이라이트, 안내 메시지 제공
  - 서버 오류 → "잠시 후 다시 시도" 메시지 출력

- **팀 생성 및 팀원 관리**
  - 중복 팀 이름 입력 → 중복 오류 메시지 제공
  - 초대 이메일 형식 오류 → 즉각적 오류 메시지 및 재입력 요청
  - 팀명 검색 가입 신청 시, 팀 리더 승인 실패 → 재신청 안내 및 알림 제공

- **경기 일정 및 스탯 기록**
  - 필수 경기 정보 누락 → 유효성 검사 실패 메시지
  - 스탯 입력 오류(숫자 형식 오류 등) → 실시간 오류 메시지 및 재입력 안내
  - 게스트 클럽 등록 실패 또는 상대 팀 미정 상태 처리 오류 → 추가 안내 메시지 제공
  - 참가자 추가/불참 여부 변경 시 오류 발생 → 관리자 알림 및 재시도 유도

- **리그 생성 및 관리**
  - 필수 리그 정보 누락 → 오류 메시지 출력, 재시도 유도
  - 팀 등록 실패 → 상세 오류 피드백 제공

---

## 5. Comprehensive Actor Definitions

### 팀 리더
- **정의**: 팀 전반 관리 담당
- **책임**:
  - 팀 생성 및 정보 관리
  - 팀원 초대 및 팀 가입 신청 승인
  - 경기 일정 생성 및 스탯 입력
  - 리그 생성 및 운영 관리

### 팀원
- **정의**: 팀에 참여하는 사용자
- **책임**:
  - 팀 소속, 경기 참여 및 스탯 입력
  - 팀 가입 신청 후 수락 시 팀 등록

### 게스트 사용자 / 용병
- **정의**: 시스템에 등록되지 않은 팀의 구성원 또는 용병
- **책임**:
  - 경기 참여 시 스탯(골, 어시스트) 기록
  - 경기 기록에 포함되어 통계에 반영

### 시스템
- **정의**: 사용자 요청 처리 및 데이터 저장, 업데이트 담당
- **책임**:
  - 인증, 데이터 저장, 실시간 동기화 및 오류 처리

---

## 6. Detailed Use Case Scenarios

### A. 로그인 및 회원가입 시나리오
- **목표**: 사용자가 이메일 및 비밀번호를 입력하거나 소셜 계정 (Kakao, Google)으로 인증하여 서비스에 접근
- **주요 단계**:
  1. `/login` 또는 `/signup` 페이지 접근
  2. 이메일, 비밀번호 입력
  3. 시스템에서 검증 후 인증
  4. 성공 시 대시보드(`/dashboard`) 이동, 실패 시 오류 메시지 출력

### B. 팀 생성 및 팀원 관리 시나리오
- **목표**: 팀 리더가 팀 생성 및 팀원 초대를 통해 팀 구성 완료
- **주요 단계**:
  1. 팀 리더가 대시보드에서 "팀 관리" 선택
  2. "팀 생성" 버튼 클릭 후 팀 정보 입력 및 저장
  3. 팀 목록 업데이트
  4. 팀 상세 페이지에서 팀원 초대 기능 사용
  5. 초대받은 팀원이 초대를 수락하여 팀 등록
  6. **추가 시나리오**: 사용자가 팀명 검색을 통해 가입 신청  
     - 사용자가 팀명을 검색하여 가입 신청  
     - 팀 리더가 신청 내역 확인 후 "수락" 버튼 클릭하여 가입 승인

### C. 경기 일정 생성 및 스탯 기록 시나리오
- **목표**: 경기 일정 생성 및 경기 종료 후 각 선수의 스탯 기록
- **주요 단계**:
  1. "경기 관리" 메뉴에서 "경기 일정 생성" 버튼 클릭
  2. 경기 일정, 장소, 시간 등 정보 입력
  3. 참가자 추가 및 관리
  4. **추가 단계 1**: 등록된 팀이 아닌 경우 "게스트 클럽" 등록 후 기록 관리
  5. **추가 단계 2**: 상대 팀 미정일 경우, 상대 팀 정보를 미입력하고 이후 관리자가 업데이트할 수 있도록 처리
  6. **추가 단계 3**: 용병(외부 선수)이 스탯(골, 어시스트) 기록 시 해당 정보 입력
  7. 경기 종료 후 각 선수 스탯 입력
  8. **추가 단계 4**: 결과 입력 시, 관리자가 참가자 추가/불참 여부를 변경 관리 (예: 불참이었으나 참가한 경우 또는 그 반대)
  9. 기록 저장 및 팀/개인 통계 업데이트

### D. 리그 생성 및 관리 시나리오
- **목표**: 리그 생성 후 팀 등록 및 경기 일정 관리
- **주요 단계**:
  1. "리그 관리" 메뉴에서 "리그 생성" 버튼 클릭
  2. 리그 정보(이름, 기간, 참가 팀 등) 입력
  3. 리그 생성 후 경기 일정 자동 생성 또는 수동 조정
  4. 리그 진행 중 팀별 순위 및 결과 업데이트
  5. 최종 결과 및 통계 제공

---

## 7. Main Steps and Flow of Events

### 예시: 팀 생성 및 팀원 관리
1. **시작**
   - 팀 리더가 대시보드에 로그인 후 "팀 관리" 메뉴 선택
2. **팀 생성**
   - "팀 생성" 버튼 클릭 후 팀 이름, 설명 등 입력 → "저장" 버튼 클릭하여 데이터베이스에 팀 정보 저장
3. **팀원 초대**
   - 팀 상세 페이지에서 "팀원 초대" 버튼 클릭 후 초대할 팀원 이메일 입력 → 시스템이 초대 이메일 발송 및 상태 업데이트
4. **가입 신청 처리 (추가 흐름)**
   - 사용자가 팀명 검색을 통해 가입 신청
   - 팀 리더가 신청 내역 확인 후 "수락" 버튼 클릭하여 가입 승인 처리
5. **종료**
   - 팀 생성 및 초대 완료 후 팀 리더와 팀원은 정상적으로 팀 활동 시작

### 예시: 경기 일정 생성 및 스탯 기록
1. **시작**
   - "경기 관리" 메뉴에서 "경기 일정 생성" 버튼 클릭
2. **경기 정보 입력**
   - 경기 일정, 장소, 시간 등 필수 정보 입력
3. **참가자 추가**
   - 참가자 추가 및 관리 진행
4. **추가 단계 1: 게스트 클럽 등록**
   - 등록된 팀이 아닌 경우 "게스트 클럽" 등록 후 해당 팀의 경기 기록 관리
5. **추가 단계 2: 상대 팀 미정 처리**
   - 상대 팀 정보 미입력 후, 나중에 관리자가 업데이트할 수 있도록 처리
6. **추가 단계 3: 용병 스탯 기록**
   - 용병(외부 선수)이 기록한 골/어시스트 정보 입력
7. **경기 종료 후 스탯 입력**
   - 각 선수의 스탯(골, 도움) 입력
8. **추가 단계 4: 관리자 참가자 상태 관리**
   - 결과 입력 시 관리자가 참가자 추가/불참 여부를 변경할 수 있도록 수정
9. **종료**
   - 기록 저장 후 팀 및 개인 통계 업데이트

---

## 8. Alternative Flows and Edge Cases

| 시나리오                     | 대체 흐름 / 에지 케이스                                             | 처리 방법                                   |
|-----------------------------|------------------------------------------------------------|------------------------------------------|
| **로그인 실패**              | 잘못된 이메일/비밀번호 입력                                    | 오류 메시지 출력, 재입력 유도                  |
| **필수 정보 누락**            | 회원가입 또는 팀/경기/리그 생성 시 필수 항목 누락                      | 입력 필드 하이라이트, 안내 메시지 제공           |
| **중복 팀 이름**             | 이미 존재하는 팀 이름 입력                                     | 중복 오류 메시지 출력, 다른 이름 입력 요구        |
| **초대 이메일 오류**          | 잘못된 이메일 형식 또는 미등록 이메일 입력                         | 형식 검증 및 존재 여부 확인, 오류 메시지 출력      |
| **가입 신청 승인 실패**        | 팀명 검색 후 가입 신청 건에 대해 팀 리더가 승인하지 않음                   | 재신청 안내 및 알림 제공                        |
| **경기 스탯 입력 오류**        | 경기 스탯(골, 도움) 미입력 또는 잘못된 형식 입력                       | 실시간 유효성 검사, 재입력 안내 메시지 제공         |
| **게스트 클럽 등록 실패**       | 등록되지 않은 팀에 대해 게스트 클럽 등록 시 오류 발생                    | 오류 메시지 출력 및 재시도 유도                   |
| **상대 팀 미정 상태 처리 오류**   | 상대 팀 미정으로 경기 생성 시, 관리자가 업데이트하지 못하는 경우                | 추가 관리자 알림 및 후속 조치 유도                |

---

## 9. Preconditions and Postconditions

### Preconditions (사전 조건)
- 사용자는 **로그인** 상태여야 함.
- 사용자 프로필에 **필수 정보**가 등록되어 있어야 함.
- 팀, 경기, 리그 생성 시 필요한 **입력 필드** 및 검색 기능 준비 완료.

### Postconditions (사후 조건)
- 성공적인 작업 후 데이터베이스에 **정확한 기록** 저장.
- UI에 **실시간 업데이트**된 정보 반영.
- 오류 발생 시 적절한 **오류 메시지**와 재시도 옵션 제공.

---

## 10. Business Rules and Constraints

- 모든 기능은 **로그인 인증** 후 접근 가능.
- **필수 입력 항목**은 누락 없이 입력되어야 하며, 유효성 검사가 반드시 수행되어야 함.
- 팀, 경기, 리그의 **이름 중복** 방지 검증 로직 필요.
- 경기 스탯 및 리그 결과는 **실시간 업데이트**되어야 하며, 변경 이력 관리.
- 게스트 클럽 및 용병 기록도 포함하여 상대 전적 관리 필요.
- 관리자는 경기 결과 입력 시 참가자 추가/불참 여부를 변경 관리할 수 있어야 함.
- 시스템은 **반응형 디자인**과 **접근성**을 고려하여 개발되어야 함.

---

## 11. Exception Handling Procedures

- **오류 로깅**: 모든 예외 상황을 서버 로그에 기록.
- **사용자 피드백**: 오류 발생 시 명확한 안내 메시지와 재시도 옵션 제공.
- **네트워크 오류**: 서버 연결 실패 시 "네트워크 오류" 메시지 출력 및 재시도 기능 제공.
- **데이터 입력 오류**: 유효성 검사 실패 시 필드 하이라이트 및 상세 설명 메시지 제공.

---

## 12. User Interface Considerations

- **반응형 디자인**: 데스크탑, 태블릿, 모바일 환경에 최적화된 UI 제공.
- **접근성**: ARIA 속성, 키보드 내비게이션, 스크린 리더 호환성 보장.
- **실시간 피드백**: 폼 입력 시 실시간 유효성 검사 및 오류/성공 메시지 제공.
- **일관된 네비게이션**: Topbar를 통한 메뉴 접근, 명확한 아이콘 및 텍스트 레이블 제공.
- **모달 및 팝업**: 팀원 초대, 가입 신청 처리, 경기 스탯 입력 시 모달 창 사용 및 포커스 관리.

---

## 13. Data Requirements and Data Flow

- **데이터 요구사항**:
  - 사용자 정보: 이메일, 비밀번호, 이름 등
  - 팀 정보: 팀 이름, 설명, 생성일 등
  - 경기 정보: 일정, 장소, 참가자, 스탯(골, 도움 등)
  - 리그 정보: 이름, 기간, 참가 팀, 경기 일정, 순위 등
  - 가입 신청 내역, 게스트 클럽, 용병 정보 등

- **데이터 흐름**:
  1. 사용자가 UI에 데이터를 입력 (예: 팀 생성 폼, 경기 생성 폼)
  2. 클라이언트 측 유효성 검사 후 API 요청 전송
  3. 서버(예: Supabase)가 데이터를 검증 및 저장
  4. 저장된 데이터는 실시간 업데이트를 통해 UI에 반영
  5. 데이터 전송 시 HTTPS 및 토큰 기반 인증 사용

---

## 14. Security and Privacy Considerations

- **사용자 인증**: 모든 접근은 강력한 로그인 인증 및 토큰 기반(JWT 등) 인증 절차를 통해 보호.
- **데이터 암호화**: 전송 데이터는 HTTPS를 통해 암호화, 저장 데이터는 암호화하여 보관.
- **개인정보 보호**: 최소한의 개인정보만 수집, GDPR 등 관련 법규 준수.
- **접근 제어**: 기능별 사용자 권한에 따른 접근 제어 및 민감 정보 접근 제한.
- **세션 관리**: 세션 타임아웃, 자동 로그아웃, CSRF/XSS 공격 방어 메커니즘 적용.

---
